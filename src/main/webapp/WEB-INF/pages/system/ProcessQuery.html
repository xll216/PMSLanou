<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <link href="../../static/miniuis/demo.css" rel="stylesheet" type="text/css"/>

    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
            border: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .icon-boy, .icon-female {
            width: 16px;
            height: 16px;
            background: url(../../static/imgs/user.gif) no-repeat;
            display: block;
        }

        .icon-female {
            background: url(../../static/imgs/user_female.gif) no-repeat;
        }

        .header {
            background: url(../../static/miniuis/header.gif) repeat-x 0 -1px;
        }

        td {
            text-align: center;
        }
    </style>
</head>
<body>
<div class="header">当前位置：综合管理 >> 流程查询</div>
<div class="header" style="color: #00adee">查询条件</div>

<table border="0" cellpadding="1" cellspacing="2" style="width:100%;table-layout:fixed;">
    <tr>
        <td style="width:80px;">申请时间：</td>
        <td style="width:20%">
            <input name="BirthDay" class="mini-datepicker" style="width:100%;"/>
        </td>
        <td>申请人：</td>
        <td style="width:20%">
            <input name="addr" class="mini-textbox" style="width:100%;"/>
        </td>
        <td style="width:40px;"><span class='icon-female'></span></td>
        <td style="width:100px;">关键字：</td>
        <td style="width:20%">
            <input name="addr" class="mini-textbox" style="width:100%;"/>
        </td>
    </tr>
    <tr>
        <td>流程类型：</td>
        <td style="width:20%">
            <input id="combobox2" class="mini-combobox" style="width: 100%;background: white"
                   textField="text" valueField="id" value="PMS_05"/>
        </td>
        <td>所属部门：</td>
        <td>
            <input name="addr" class="mini-textbox" style="width:100%;"/>
        </td>
        <td style="width:40px;"><span class='icon-female'></span></td>
        <td>是否可以打印：</td>
        <td style="width:20%">
            <input id="combobox3" class="mini-combobox" style="width: 100%;background: white"
                   textField="text" valueField="id" value="yes"/>
        </td>
    </tr>
    <tr>
        <td colspan="6"></td>
        <td style="width:60px;"><a class="mini-button">查询</a></td>
    </tr>
</table>


<div class="mini-fit">

    <div id="datagrid1" class="mini-datagrid" style="width:100%;height:100%;"
         idField="id" multiSelect="true">
        <div property="columns">
            <div type="checkcolumn"></div>
            <div field="number" width="120" headerAlign="center" align="center" allowSort="true">流程编号</div>
            <div field="name" width="120" headerAlign="center" align="center" allowSort="true">流程名称</div>
            <div field="deptID" width="120" headerAlign="center" align="center" allowSort="true">所属部门</div>
            <div field="step" width="120" headerAlign="center" align="center" allowSort="true">当前环节</div>
            <div field="applyID" width="120" headerAlign="center" align="center" allowSort="true">提报人</div>
            <div field="applyDate" width="120" headerAlign="center" align="center" allowSort="true">是否可以打印
            </div>
            <div field="operator" headerAlign="center" align="left">操作</div>
        </div>
    </div>

</div>

<!--引入的js-->
<script src="../../static/miniuis/boot.js" type="text/javascript"></script>
<!--end-->

<script type="text/javascript">
    mini.parse();
    var grid = mini.get("datagrid1");
    var arr = [
        {
            "number": "20160819001", "name": "消防系统隔离单申请", "deptID": "后勤部", "step": "工业安全科审批",
            "applyID": "张三[P123456]", "applyDate": "是"
        },
        {
            "number": "20160819001", "name": "消防系统隔离单申请", "deptID": "后勤部", "step": "工业安全科审批",
            "applyID": "张三[P123456]", "applyDate": "否"
        }
    ];
    grid.setData(arr);

    grid.on("drawcell", function (e) {
        var field = e.field;
        var rowIndex = e.rowIndex;

        //格式化日期
        if (field == "operator") {
            if (rowIndex == 0){
                e.cellHtml = "<a class='mini-button' style='padding: 8px'>流程</a>  <a class='mini-button' style='padding: 8px'>打印</a>";
            }else{
                e.cellHtml = "<a class='mini-button' style='padding: 8px'>流程</a>";
            }
        }
    });


    var combobox2 = mini.get("combobox2");
    var arr2 = [
        {"id": "PMS_01", "text": "科研项目申报与评审流程"},
        {"id": "PMS_02", "text": "科研项目合同推荐"},
        {"id": "PMS_03", "text": "项目成功与计划调整申请流程"},
        {"id": "PMS_04", "text": "承接外部科技项目申报流程"},
        {"id": "PMS_05", "text": "卫星库授权"}
    ];
    combobox2.setData(arr2);

    var combobox3 = mini.get("combobox3");
    var arr3 = [
        {"id": "yes", "text": "是"},
        {"id": "no", "text": "否"}
    ];
    combobox3.setData(arr3);


</script>


</body>
</html>